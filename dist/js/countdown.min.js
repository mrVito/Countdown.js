Array.prototype.removeWhere=function(t,e){"use strict";for(var i=0;i<this.length;i++)if(this[i][t]===e){this.splice(i,1);break}};var Countdown=function(){"use strict";function t(t,e){this.defaults={endTimeAttr:"data-time",secondsAttr:"data-seconds",dayTextAttr:"data-text",useDayTextAttr:!0,initText:"---",endedText:"---",usePlurals:!1,showZeroDays:!0,showZeroHours:!0,daySingle:" d. ",dayPlural:" d. ",dayGenitive:" d. ",hourSingle:":",hourPlural:":",hourGenitive:":",minuteSingle:":",minutePlural:":",minuteGenitive:":",secondSingle:"",secondPlural:"",secondGenitive:"",callback:null},this.options=$.extend({},this.defaults,e),this.counters=[],this.removeQueue=[],this.stopped=!0,this.init(t)}t.prototype.init=function(t){var i=this;t.each(function(t,o){var n=new e(t,$(o),i);n.changeText(i.options.initText),i.counters.push(n)}),this.startTimer()},t.prototype.startTimer=function(){this.stopped=!1,setTimeout(this.doTick.bind(this),1e3)},t.prototype.stopTimer=function(){this.stopped=!0},t.prototype.doTick=function(){if(!this.stopped){if(!this.counters.length)return void this.stopTimer();this.tick(),this.startTimer()}},t.prototype.tick=function(){var t=this.getTimeNow();this.counters.forEach(function(e){e.countDown(t)}),this.removeQueued()},t.prototype.removeQueued=function(){var t=this;this.removeQueue.forEach(function(e){t.counters.removeWhere("id",e)}),this.removeQueue=[]},t.prototype.addToRemoveQueue=function(t){this.removeQueue.push(t)},t.prototype.getTimeNow=function(){return Math.floor(Date.now()/1e3)};var e=function(){function t(t,e,i){this.parent=i,this.$element=e,this.id=t,this.timeDiff=0,this.dayText=this.parseDayText(),this.useSeconds=!1,this.endTime=this.parseEndTime(),this.endTime||(this.useSeconds=!0,this.seconds=this.parseSeconds())}return t.prototype.parseDayText=function(){return this.parent.options.useDayTextAttr?this.$element.attr(this.parent.options.dayTextAttr):null},t.prototype.parseEndTime=function(){return this.$element.attr(this.parent.options.endTimeAttr)},t.prototype.parseSeconds=function(){return this.$element.attr(this.parent.options.secondsAttr)},t.prototype.countDown=function(t){this.useSeconds?(this.seconds-=1,this.timeDiff=this.seconds):this.timeDiff=this.endTime-t,this.check()},t.prototype.check=function(){return this.timeDiff<=0?(this.invokeCallback(),this.setEnded(),void this.remove()):void this.renderText()},t.prototype.setEnded=function(){this.changeText(this.parent.options.endedText)},t.prototype.invokeCallback=function(){"function"==typeof this.parent.options.callback&&this.parent.options.callback(this.$element)},t.prototype.renderText=function(){var t,e,i,o,n=this.timeDiff;o=this.formatNumber(n%60),n=Math.floor(n/60),i=this.formatNumber(n%60),n=Math.floor(n/60),e=this.formatNumber(n%24),n=Math.floor(n/24),t=n,t=0>=t&&!this.parent.options.showZeroDays?"":this.getNumberText(t,"day"),e=0>=e&&!this.parent.options.showZeroHours?"":this.getNumberText(e,"hour"),i=this.getNumberText(i,"minute"),o=this.getNumberText(o,"second");var s=t+e+i+o;this.changeText(s)},t.prototype.getNumberText=function(t,e){return"day"===e&&this.parent.options.useDayTextAttr?t+this.dayText:this.parent.options.usePlurals?t+this.pluralText(t,e):t+this.getText(e)},t.prototype.pluralText=function(t,e){var i=String(t),o=Number(i.substr(i.length-1));return 1===o?this.getText(e,"Single"):t>=10&&20>=t?this.getText(e,"Genitive"):t%10===0?this.getText(e,"Genitive"):this.getText(e,"Plural")},t.prototype.getText=function(t,e){return void 0===e&&(e="Single"),this.parent.options[t+e]},t.prototype.changeText=function(t){return document.contains(this.$element[0])?void this.$element.text(t):void this.remove()},t.prototype.remove=function(){this.parent.addToRemoveQueue(this.id)},t.prototype.formatNumber=function(t){return 10>t?"0"+t:t},t}();return t}();